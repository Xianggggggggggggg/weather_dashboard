# -*- coding: utf-8 -*-
"""weather_dashboard.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1yDq7OqYtp_50-pzdsgSEeDLnDeG8uV9y
"""



import requests
import streamlit as st
import pandas as pd

st.title("ğŸŒ¥ å°ç£çš„æ°£è±¡è³‡æ–™ Dashboard")

API_KEY = "CWA-C9E52E67-5C22-4074-A61B-C48E190762DE"
LOCATION = st.selectbox("é¸æ“‡åŸå¸‚", ["é›²æ—ç¸£","å°åŒ—å¸‚","é«˜é›„å¸‚","å˜‰ç¾©ç¸£"])

url = f"https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization={API_KEY}"
res = requests.get(url , verify=False)
data = res.json()

# æ­£ç¢ºå‘½åè®Šæ•¸
locations = data["records"]["location"]
location_data = next((loc for loc in locations if loc["locationName"] == LOCATION), None)

if location_data is None:
    st.error(f"æ‰¾ä¸åˆ° {LOCATION} çš„è³‡æ–™")
    st.stop()

st.subheader(f"{location_data['locationName']} 36å°æ™‚é å ±")

for element in location_data["weatherElement"]:
    name = element["elementName"]
    value = element["time"][0]["parameter"]["parameterName"]
    st.write(f"{name}: {value}")
